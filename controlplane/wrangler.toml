name = "orcabot-controlplane"
main = "src/index.ts"
compatibility_date = "2024-01-01"

[vars]
DEV_AUTH_ENABLED = "true"
SANDBOX_INTERNAL_TOKEN = "pHkOmsNY17gDHZZ6aie3IXMVgyTDioPSAlmiuHC2hXA="
INTERNAL_API_TOKEN = "pHkOmsNY17gDHZZ6aie3IXMVgyTDioPSAlmiuHC2hXA="
SANDBOX_URL = "https://orcabot-sandbox.fly.dev/"

# Rate limiting
[[unsafe.bindings]]
name = "RATE_LIMITER"
type = "ratelimit"
namespace_id = "1"
simple = { limit = 100, period = 60 }  # 100 requests per minute

# Durable Objects for real-time collaboration
[[durable_objects.bindings]]
name = "DASHBOARD"
class_name = "DashboardDO"

[[migrations]]
tag = "v1"
new_sqlite_classes = ["DashboardDO"]

# D1 Database for persistent state
[[d1_databases]]
binding = "DB"
database_name = "orcabot-db"
database_id = "7d6525ac-8867-4e8a-8f02-0ec3dfa288a2"

# For local development
[dev]
port = 8787
local_protocol = "http"
